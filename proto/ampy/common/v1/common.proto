syntax = "proto3";
package ampy.common.v1;

option csharp_namespace = "Ampy.Common.V1";
option java_multiple_files = true;
option java_package = "dev.ampy.common.v1";
option objc_class_prefix = "AmpyCommonV1";
// go_package is managed by buf.gen.yaml managed mode.


// ===== Shared Enums =====
enum AdjustmentPolicy {
  ADJUSTMENT_POLICY_UNSPECIFIED = 0;
  ADJUSTMENT_POLICY_RAW = 1;
  ADJUSTMENT_POLICY_SPLIT_ONLY = 2;
  ADJUSTMENT_POLICY_SPLIT_DIVIDEND = 3;
}

enum Side {
  SIDE_UNSPECIFIED = 0;
  SIDE_BUY = 1;
  SIDE_SELL = 2;
}

enum OrderType {
  ORDER_TYPE_UNSPECIFIED = 0;
  ORDER_TYPE_MARKET = 1;
  ORDER_TYPE_LIMIT = 2;
  ORDER_TYPE_STOP = 3;
  ORDER_TYPE_STOP_LIMIT = 4;
}

enum TimeInForce {
  TIME_IN_FORCE_UNSPECIFIED = 0;
  TIME_IN_FORCE_DAY = 1;
  TIME_IN_FORCE_GTC = 2;
  TIME_IN_FORCE_IOC = 3;
  TIME_IN_FORCE_FOK = 4;
  TIME_IN_FORCE_GTT = 5;
}

enum SignalType {
  SIGNAL_TYPE_UNSPECIFIED = 0;
  SIGNAL_TYPE_ALPHA = 1;
  SIGNAL_TYPE_ACTION = 2;
}

enum ActionType {
  ACTION_TYPE_UNSPECIFIED = 0;
  ACTION_TYPE_BUY = 1;
  ACTION_TYPE_SELL = 2;
  ACTION_TYPE_HOLD = 3;
  ACTION_TYPE_CLOSE = 4;
}

// ===== Shared Types =====

// Decimal uses scaled integer semantics to avoid float rounding errors.
// Example: scaled=123456, scale=4 => 12.3456
message Decimal {
  sint64 scaled = 1;
  int32 scale = 2;
}

// Money value with ISO-4217 currency code (e.g., "USD", "EUR", "JPY", "KRW").
message Money {
  Decimal amount = 1;
  string currency_code = 2;
}

// Security identity â€” avoid relying on ticker alone.
// "mic" is the ISO 10383 market identifier code (e.g., "XNAS", "XNYS").
message SecurityId {
  string symbol = 1;
  string mic = 2;
  string figi = 3; // optional
  string isin = 4; // optional
}

// Meta lineage fields for traceability and reproducibility.
message Meta {
  string run_id = 1;          // workflow/run identifier
  string source = 2;          // e.g., "yfinance-go", "databento-cpp"
  string producer = 3;        // instance name/id
  string schema_version = 4;  // e.g., "ampy.bars.v1:1.0.0"
  string checksum = 5;        // optional payload checksum/hash
}
